<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>CRUD testing</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/bulma-css/bulma/css/bulma.min.css">
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <section class="section">
      <div class="container">
        <h1 class="title">CRUD Testing</h1>
        <p class="subtitle">Testing all API operations for the <strong>SW Saga</strong> API!</p>
        <form>
          <div class="columns">
            <div class="column">
              <div class="field">
                <label class="label">Character Name</label>
                <div class="control">
                  <input class="input" type="text" placeholder="Obi-wan Kenobi" id="character-name" name="character-name" required>
                </div>
                <p class="help">Please use a fairly decent in universe name</p>
              </div>
            </div>
          </div>  
          <div class="columns">
            <div class="column">
              <div class="field has-addons">
                <p class="control">
                  <a class="button is-static">
                    STR
                  </a>
                </p>
                <p class="control">
                  <input class="input" type="text" placeholder="STRength" id="str" name="str" required>
                </p>
              </div>
              <p class="help">Enter a number 0-20</p>
            </div>
            <div class="column">
              <div class="field has-addons">
                <p class="control">
                  <a class="button is-static">
                    DEX
                  </a>
                </p>
                <p class="control">
                  <input class="input" type="text" placeholder="DEXterity" id="dex" name="dex" required>
                </p>
              </div>
              <p class="help">Enter a number 0-20</p>
            </div>
            <div class="column">
              <div class="field has-addons">
                <p class="control">
                  <a class="button is-static">
                    CON
                  </a>
                </p>
                <p class="control">
                  <input class="input" type="text" placeholder="CONstitution" id="con" name="con" required>
                </p>
              </div>
              <p class="help">Enter a number 0-20</p>
            </div>
            <div class="column">
              <div class="field has-addons">
                <p class="control">
                  <a class="button is-static">
                    INT
                  </a>
                </p>
                <p class="control">
                  <input class="input" type="text" placeholder="INTelligence" id="int" name="int" required>
                </p>
              </div>
              <p class="help">Enter a number 0-20</p>
            </div>
            <div class="column">
              <div class="field has-addons">
                <p class="control">
                  <a class="button is-static">
                    WIS
                  </a>
                </p>
                <p class="control">
                  <input class="input" type="text" placeholder="WISdom" id="wis" name="wis" required>
                </p>
              </div>
              <p class="help">Enter a number 0-20</p>
            </div>
            <div class="column">
              <div class="field has-addons">
                <p class="control">
                  <a class="button is-static">
                    CHA
                  </a>
                </p>
                <p class="control">
                  <input class="input" type="text" placeholder="CHArisma" id="cha" name="cha" required>
                </p>
              </div>
              <p class="help">Enter a number 0-20</p>
            </div>
          </div>
          <div class="columns">
            <div class="column">
              <div class="control is-expanded">
                <label class="label">Species</label>
                <div class="select">
                  <select id="specie" name="specie" required>
                    <option disabled selected>Select species</option>
                    <option>Human</option>
                    <option>Zabrak</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="column">
              <div class="control is-expanded">
                <label class="label">Class</label>
                <div class="select">
                  <select id="classChoice" name="classChoice" required>
                    <option disabled selected>Select class</option>
                    <option>Jedi</option>
                    <option>Noble</option>
                    <option>Soldier</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="columns">
            <div class="column">
              <div class="control">
                <button type="submit" id="submit-button" class="button is-primary">Submit</button>
              </div>
            </div>
          </div>
        </form>
        <div class="columns">
          <div class="column">
            <div class="output"></div>
          </div>
        </div>
      </div>
    </section>
    <script src="" async defer></script>
    <script>
      const submitBtn = document.getElementById("submit-button");
      submitBtn.addEventListener("click", (event) => {
        event.preventDefault();
        characterData = {
          "character-name": document.getElementById("character-name").value,
          "abilities": {
            "str": document.getElementById("str").value,
            "dex": document.getElementById("dex").value,
            "con": document.getElementById("con").value,
            "int": document.getElementById("int").value,
            "wis": document.getElementById("wis").value,
            "cha": document.getElementById("cha").value
          },
          "specie": document.getElementById("specie").value,
          "class-level": {
            "class": {
              "class-name": document.getElementById("classChoice").value,
              "level": 1
            }
          }
        }
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "http://localhost:3001/characters", true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify(characterData));
        console.log(characterData);
      });

    </script>
  </body>
</html>